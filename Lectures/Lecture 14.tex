\documentclass[../main.tex]{subfiles}

\begin{document}

\chapter{Soft sheaves, exponential sequence, higher pushforwards}

\section{Soft sheaves of rings}

We will show that the sheaves \(C^0(-,\bb R)=h_{\bb R}\) and \(C^\infty(-,\bb R)\) (on a manifold) are soft.

\begin{prop}
    Let $X$ be a Hausdorff space.
    \begin{enumerate}
        \item\label{prop:sheaf-of-real-sections-soft:soft} If $X$ is paracompact then $C^0(-, \bb R) = h_{\bb R}$ is soft.
        \item\label{prop:sheaf-of-real-sections-soft:c-soft} If $X$ is locally compact, then $C^0(-, \bb R)$ is c-soft.
    \end{enumerate}
\end{prop}

\begin{proof}
    \begin{enumerate}
        \item Let $Z$ be closed and $s\in \restr{C^0(-, \bb Z)}{Z}(Z)$. We saw that $s$ extends to some open $U\supseteq Z$. Note that $X$ is normal: two disjoint closed subsets have disjoint closed neighbourhoods. Thus we may produce $A\supseteq Z$ and $B\supseteq X\backslash U$ closed with $A\cap B = \varnothing$. By Urysohn's lemma, there exists an $f\colon X\to [0,1]$ such that $\restr{f}{A} = 1$ and $\restr{f}{B} = 0$. So $f\cdot s$ (the obvious extension) agrees on $\interior A$ with $s$ and hence extends by extends by $0$ to a section $t\in C^0(X, \bb R)$ lifting $s\in \restr{C^0(-, \bb R)}{Z}(Z)$. 
        \item Apply \cref{prop:sheaf-of-real-sections-soft:soft} on a compact neighborhood $Z\subseteq A$ and extend by $0$ on $X\backslash A$. \qedhere
    \end{enumerate}
\end{proof}

Using partitions of unity this result can be generalized to any $C^k$-manifold (where we assume manifolds to be paracompact).

\begin{prop}
    Let $X$ be a $C^k$-manifold. Then $C^k(-, \bb R)$ is soft.
\end{prop}

\begin{lem}
    Let $X$ be a Hausdorff space and $\O_X$ a sheaf of rings. Let $\sh F$ be a sheaf of $\O_X$-modules.
    \begin{enumerate}
        \item\label{lem:sheaf-of-rings-soft:soft} If $X$ is paracompact and $\O_X$ is soft, then $\sh F$ is soft.
        \item\label{lem:sheaf-of-rings-soft:c-soft} If $X$ is locally compact and $\O_X$ is c-soft, then $\sh F$ is c-soft.
    \end{enumerate}
\end{lem}
\begin{proof}
    Let $Z\subseteq X$ be closed and $s\in \restr{\sh F}{Z}(Z)$ and extend to $s\in \sh F(U)$ for $U\supseteq Z$ open (in \cref{lem:sheaf-of-rings-soft:c-soft} assume both $Z$ and $\overline{U}$ are compact). If $A = X\backslash U$ then $Z \coprod A \subset Z$ closed (and compact in case \cref{lem:sheaf-of-rings-soft:c-soft}). The section $(1,0) \in \O_X(Z\coprod A) = \O_X(A)\times \O_X(Z)$ extends to $f\in \O_X(X)$ (compactly supported in case \cref{lem:sheaf-of-rings-soft:c-soft}). Then $f\cdot s \in \sh F(U)$ extends by $0$ to a (compactly supported) section $\sh F(X)$. \todo{is proof of \cref{lem:sheaf-of-rings-soft:c-soft} correct?}
\end{proof}

\begin{exmp}\label{exmp:manifold-Omega}
    On a manifold $X$ the sheaf $\Omega^i_X$ of $C^\infty$-sections of the cotangent bundle $\bigwedge^i T_X^*$ is a sheaf of $C^\infty(-, \bb R)$ modules and hence $\Omega_X^i$ is soft and in particular acyclic. (We will use this for the comparison to de Rham cohomology).
\end{exmp}

\section{The exponential sequence}

\begin{lem}\label{lem:exponential-sequence}
On any topological space \(X\), the sequence $0\to \underline{\bb Z} \to h_{\bb R}\to h_{S^1} \to 0$ is a short exact sequence of abelian sheaves.
\end{lem}
\begin{proof}
Exactness of $0\to \underline{\bb Z}\to h_{\bb R}\to h_{S^1}$ is readily verified. Surjectivity of $h_{\bb R}\to h_{S^1}$ follows since any $U\to S^1$ locally lifts to $U_i\to \bb R$ since $\bb R\to S^1$ is a local homeomorphism.
\end{proof}

\begin{rmk}
    Note that if $X$ is simply connected, then any $U\to S^1$ already lifts to $U\to \bb R$.
    \remyquote{presumably in Munkres}
\end{rmk}


\begin{lem}
    If $X = \bb R$ or $[0,1]$ or $[0,1)$ then $h_{S^1}$ is soft on $X$.
\end{lem}

\begin{proof}
    Let $Z\subseteq X$ be closed and $s\in \restr{h_{S^1}}{Z}(Z)$; it extends to $s\in h_{S^1}(U)$ for $U\supseteq Z$ open. But $U$ is a disjoint union of contractible opens. So $s$ lifts to $t_U \in h_{\bb R}(U)$. Since $h_{\bb R}$ is soft, we get $t\in h_{\bb R}(X)$ with $\restr{t}{U} = t_U$ so its image in $h_{S^1}(X)$ does the job.
\end{proof}

\begin{cor}\label{cor:computation-cohomology-interval-real-line}
    \begin{enumerate}
        \item If $X$ is either $\bb R$, $[0,1]$ or $[0,1)$ then the cohomology of \(X\) with coefficients in the constant sheaf \(\underline{\bb Z}\) is $$H^i(X, \underline{\bb Z}) = \begin{cases}
            \bb Z & \text{if } i = 0\text{,} \\ 
            0 & \text{if } i>0\text{.}
        \end{cases}$$
        \item The compactly supported cohomology of \(\bb R\), \([0,1]\) and \([0,1)\) with coefficients in the constant sheaf \(\underline{\bb Z}\) is:
        \begin{align*}
            H^i_c(\bb R, \underline{\bb Z}) &= \begin{cases}
                \bb Z & \text{if } i = 1\text{,} \\
                0 & \text{else,}
            \end{cases} \\
            H^i_c([0,1], \underline{\bb Z}) &= \begin{cases}
                \bb Z & \text{if } i = 0\text{,} \\
                0 & \text{else,}
            \end{cases} \\
            H^i_c([0,1), \underline{\bb Z}) &= 0 \qquad \text{for all } i\text{.}
        \end{align*}
    \end{enumerate}
\end{cor}

\begin{proof}
    \begin{enumerate}
        \item \Cref{lem:exponential-sequence} gives a soft resolution of $\underline{\bb Z}$ that gives result.
        \item  For $X = [0,1]$, we have $H^i_c = H^i$ by \cref{lem:compactly-supported-cohomology-is-ordinary-cohomology-on-compact-space}. So by the lemma below, we obtain a long exact sequence
        \[\begin{tikzcd}
            0 \ar[r] & H^0_c([0,1), \underline{\bb Z}) \ar[r] & H^0_c([0,1], \underline{\bb Z}) \ar[r] \ar[draw=none]{d}[name=X, anchor=center]{} & H^0_c(\{1\}, \underline{\bb Z})
            \ar[rounded corners,
            to path={ -- ([xshift=2ex]\tikztostart.east)
                      |- (X.center) \tikztonodes
                      -| ([xshift=-2ex]\tikztotarget.west)
                      -- (\tikztotarget)}]{dll}[at end]{} \\
            & H^1_c([0,1), \underline{\bb Z}) \ar[r] & H^1_c([0,1], \underline{\bb Z}) \ar[r] \ar[draw=none]{d}[name=Y, anchor=center]{} & H^1_c(\{1\}, \underline{\bb Z})
            \ar[rounded corners,
            to path={ -- ([xshift=2ex]\tikztostart.east)
                      |- (Y.center) \tikztonodes
                      -| ([xshift=-2ex]\tikztotarget.west)
                      -- (\tikztotarget)}]{dll}[at end]{} \\
            & \dots & {} & {}
        \end{tikzcd}\]
        So since $H^i([0,1), \underline{\bb Z}) \xrightarrow{\sim} H^i_c(\{1\}, \underline{\bb Z})$ for all $i\geq 0$, $H^i_c([0,1], \underline{\bb Z}) = 0$. Similarly for $X = \bb R \cong (0,1)$, take $U = (0,1),\, X = [0,1)$ and $Z = \{0\}$ (as in lemma below). We conclude that $H^i_c(\bb R, \underline{\bb Z}) = \bb Z$ and $H^i_c(\bb R, \underline{\bb Z}) = 0$ for all other $i$. 
        \qedhere
    \end{enumerate}
\end{proof}

For an alternative proof using the winding number, see \cite[Section~\RN{3}.4]{IversenCohomologyOfSheaves}. The following lemma was used in our proof.

\begin{lem}\label{lem:open-closed-sequence}
    Let $X$ be a locally compact Hausdorff topological space and $U\subseteq X$ open with complement $Z$. Then for any sheaf $\sh F \in \catAbelianGroup(X)$ there is a long exact sequence,
    \[\begin{tikzcd}
            0 \ar[r] & H^0_c(U, \restr{\sh F}{U}) \ar[r] & H^0_c(X, \sh F) \ar[r] \ar[draw=none]{d}[name=X, anchor=center]{} & H^0_c(Z, \restr{\sh F}{Z})
            \ar[rounded corners,
            to path={ -- ([xshift=2ex]\tikztostart.east)
                      |- (X.center) \tikztonodes
                      -| ([xshift=-2ex]\tikztotarget.west)
                      -- (\tikztotarget)}]{dll}[at end]{} \\
            & H^1_c(U, \restr{\sh F}{U}) \ar[r] & H^1_c(X, \sh F) \ar[r] \ar[draw=none]{d}[name=Y, anchor=center]{} & H^1_c(Z, \restr{\sh F}{Z})
            \ar[rounded corners,
            to path={ -- ([xshift=2ex]\tikztostart.east)
                      |- (Y.center) \tikztonodes
                      -| ([xshift=-2ex]\tikztotarget.west)
                      -- (\tikztotarget)}]{dll}[at end]{} \\
            & \dots & {} & {}
    \end{tikzcd}\]
\end{lem}
\begin{proof}
    By Homework~3, Exercise~4, we have an exact sequence
    \begin{equation}\label{eq:ses-homework3}
        0 \to j_{!} \restr{\sh F}{U} \to \sh F \to i_*\restr{\sh F}{Z} \to 0
    \end{equation}
     where $j\colon U\hookrightarrow X$ and $i\colon Z\hookrightarrow X$ are the open and closed inclusions. By Additional exercise~13.1(d), we have
    $H^i_c(U, \restr{F}{U}) = H^i_c(X, j_{!}\restr{F}{U})$ for all $i\in \bb Z_{\geq 0}$. Likewise, $H^i_c(Z, \restr{\sh F}{Z}) = H^i_c(X, i_* \restr{\sh F}{Z})$. So applying the long exaxt sequence to \ref{eq:ses-homework3} we get the desired result.
\end{proof}

\todo{strategy going forward}

\section{Higher pushforwards}
\remyquote{The fact that you can draw something doesn't mean it commutes -- put that as a quote!}

\begin{defn}
    Let $f\colon Y \to X$ be a continuous map.
    Then the derived functors of the pushforward $f_*\colon \catAbelianGroup(Y) \to \catAbelianGroup(X)$ are called the \emph{higher pushforwards}\index{to categorize!higher pushforward} $\rightderived^i f_*$. 
\end{defn}

\begin{defn}
    Write $\underline{H}^i\colon \catAbelianGroup(X) \to \catAbelianPresheaf(X)$ for the derived functors of the inclusion $\catAbelianPresheaf(X) \hookrightarrow \catAbelianGroup(X)$. Note that $(\underline{H}^i(\sh F))(U) = H^i(U, \sh F)$: since the composite
    \[\catAbelianGroup(X) \hookrightarrow \catAbelianPresheaf(X) \xrightarrow{\Gamma^{\smash{\textup{pre}}}(U, -)} \catAbelianGroup\] is $\Gamma(U, -)$ and $\Gamma^{\smash{\textup{pre}}}(U, -)$ is an exact functor this follows from Homework~7, Exercise~2(i).
\end{defn}

\begin{lem}
    For a continuous map $f\colon Y \to X$ and an abelian sheaf $\sh F$, the sheaf $\rightderived^i f_* \sh F$ is the sheafification of \[\open(X)\opp \to \catAbelianGroup,\quad U \mapsto H^i(f^{-1}(U), \sh F).\]
\end{lem}
\begin{proof}
    Observe that $U\mapsto H^i(f^{-1}(U), \sh F)$ is the same as $f_* \underline{H}^i(\sh F)$ where $f_* \colon \catAbelianPresheaf(Y) \to \catAbelianPresheaf(X)$. Consider the following commutative diagram (up to natural isomorphism):
    % https://q.uiver.app/#q=WzAsNSxbMCwwLCJcXGNhdEFiZWxpYW5Hcm91cChZKSJdLFsxLDAsIlxcY2F0QWJlbGlhblByZXNoZWFmKFkpIl0sWzEsMSwiXFxjYXRBYmVsaWFuUHJlc2hlYWYoWCkiXSxbMCwxLCJcXGNhdEFiZWxpYW5Hcm91cChYKSJdLFsyLDEsIlxcY2F0QWJlbGlhbkdyb3VwKFgpIl0sWzAsMSwiaV9ZIl0sWzEsMiwiZl8qIl0sWzAsMywiZl8qIiwyXSxbMywyLCJpX1giLDJdLFswLDIsIkYiLDFdLFsyLDQsIigtKV5cXHNoYXJwIl1d
\[\begin{tikzcd}
	{\catAbelianGroup(Y)} & {\catAbelianPresheaf(Y)} \\
	{\catAbelianGroup(X)} & {\catAbelianPresheaf(X)} & {\catAbelianGroup(X)}
	\arrow["{i_Y}", from=1-1, to=1-2]
	\arrow["{f_*}"', from=1-1, to=2-1]
	\arrow["F"{description}, from=1-1, to=2-2]
	\arrow["{f_*}", from=1-2, to=2-2]
	\arrow["{i_X}"', from=2-1, to=2-2]
	\arrow["{(-)^\sharp}", from=2-2, to=2-3]
\end{tikzcd}\]

    Note that $f_*\colon \catAbelianPresheaf(Y) \to \catAbelianPresheaf(X)$ is exact (since limits are computed objectwise, or since it has a left and a right adjoint). Also $(-)^\sharp$ is exact (see \cref{exmp:exact-functors}). The result now follows by two applications of Homework~7, Exercise~2. Firstly, since $f_*$ is exact on $\catAbelianPresheaf$, we have $f_* \underline{H}^i(\sh F) = \rightderived^i F(\sh F)$. Additionally, as the composition $(-)^\sharp \circ i_X = \id$ we have $(-)^\sharp \circ F = f_*$. So exactness of $(-)^\sharp$ gives $\rightderived^i f_* \sh F = (\rightderived^i F(\sh F))^\sharp = (f_* \underline{H}^i(\sh F))^\sharp$.
\end{proof}

Likewise, since $(-)^\sharp \circ i_X = \id$ and $(-)^\sharp$ is exact, we get
\[(\underline{H}^i(\sh F))^\sharp = \rightderived^i((-)^\sharp \circ i_X)(\sh F) = \rightderived^i \id(\sh F) = 0\]
if $i>0$ since $\id$ is exact.

\section*{Exercise}

\begin{exe}[The link between soft sheaves and partitions of unity] Let $\O_X$ be a sheaf of rings on a Hausdorff space $X$.
\begin{enumerate}
    \item[(a)] If $X$ is paracompact, show that $\O_X$ is soft if and only if for every closed subset $Z\subseteq X$ and every open neighbourhood $U\supseteq Z$, there exists a section $f\in \O_X(X)$ such that $\restr{f}{Z} = 1$ and $\supp(f)\subseteq U$. 
    \item[(b)] If $X$ is locally compact, show that $\O_X$ is c-soft if and only if for every compact subset $Z\subseteq X$ and every open neighbourhood $U\supseteq Z$, there exists a section $f\in H^0_c(X, \O_X)$ such that $\restr{f}{Z} = 1$ and $\supp(f) \subseteq U$. 
\end{enumerate}

\end{exe}

\end{document}
